<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script src="https://cdn.tailwindcss.com"></script>
        <title>Document</title>
    </head>
    <body>
        <!-- Global container -->
        <div class="flex justify-center items-center bg-slate-100 h-screen w-screen">
            <!-- content container -->
            <div class="flex flex-col">
                <!-- upper container -->
                <div id="upper-container" class="px-3 flex items-center mb-6 select-none">
                    <div class="progress flex items-center">
                        <span
                            class="bg-white rounded-full inline-block w-7 h-7 text-center flex justify-center items-center border border-blue-500 border-2"
                        >
                            1
                        </span>
                    </div>
                    <div class="progress flex items-center">
                        <span class="bg-gray-300 inline-block w-0 h-1 duration-500 absolute bg-blue-500"></span>
                        <span class="bg-gray-300 inline-block w-24 h-1 duration-500"></span>
                        <span
                            class="bg-white rounded-full inline-block w-7 h-7 text-center flex justify-center items-center border border-2 duration-500"
                        >
                            2
                        </span>
                    </div>
                    <div class="progress flex items-center">
                        <span class="bg-gray-300 inline-block w-0 h-1 duration-500 absolute bg-blue-500"></span>

                        <span class="bg-gray-300 inline-block w-24 h-1 duration-500"></span>
                        <span
                            class="bg-white rounded-full inline-block w-7 h-7 text-center flex justify-center items-center border border-2 duration-500"
                        >
                            3
                        </span>
                    </div>
                    <div class="progress flex items-center">
                        <span class="bg-gray-300 inline-block w-0 h-1 duration-500 absolute bg-blue-500"></span>
                        <span class="bg-gray-300 inline-block w-24 h-1 duration-500"></span>

                        <span
                            class="bg-white rounded-full inline-block w-7 h-7 text-center flex justify-center items-center border border-2 duration-500"
                        >
                            4
                        </span>
                    </div>
                </div>
                <!-- lower container -->
                <div class="flex justify-center space-x-3 mt-3 select-none">
                    <button id="prev-button" class="bg-blue-400 hover:bg-blue-500 text-white px-8 py-2 rounded">Prev</button>
                    <button id="next-button" class="bg-blue-400 hover:bg-blue-500 text-white px-8 py-2 rounded">Next</button>
                </div>
            </div>
        </div>

        <script>
            let currentProgress = 1
            const prevButton = document.getElementById('prev-button')
            const nextButton = document.getElementById('next-button')

            setProgress()
            function setProgress() {
                document.addEventListener('click', (e) => {
                    const target = e.target
                    if (target.id !== 'prev-button' && target.id !== 'next-button') return

                    if (currentProgress === 1 || (target.id === 'next-button' && currentProgress < 4)) {
                        currentProgress++
                        nextButton.classList.add('pointer-events-none')
                    } else if (target.id === 'prev-button' && currentProgress > 1) {
                        currentProgress--
                        prevButton.classList.add('pointer-events-none')
                    }
                    renderProgress()
                })
            }

            renderProgress()

            function disableBtn(btn) {
                btn.classList.add('pointer-events-none', 'bg-gray-400')
                btn.classList.remove('bg-blue-400')
            }

            function enableBtn(btn) {
                btn.classList.add('bg-blue-400')
                btn.classList.remove('pointer-events-none', 'bg-gray-400')
            }

            function renderProgress() {
                const upperContainer = document.querySelector('#upper-container')
                const allProgresses = upperContainer.querySelectorAll(`.progress`)

                allProgresses.forEach((el, index) => {
                    if (index === 0) return

                    const bar = allProgresses[index].querySelector('span')
                    const number = allProgresses[index].querySelector('span:last-child')

                    if (index < currentProgress) {
                        if (!bar.classList.contains('w-24')) bar.classList.add('w-24')
                        if (!bar.classList.contains('w-0')) bar.classList.remove('w-0')
                        if (!number.classList.contains('border-blue-500')) number.classList.add('border-blue-500')
                        return
                    } else {
                        if (bar.classList.contains('w-24')) bar.classList.remove('w-24')
                        if (!bar.classList.contains('w-0')) bar.classList.add('w-0')
                        if (number.classList.contains('border-blue-500')) number.classList.remove('border-blue-500')
                    }
                })

                setTimeout(() => {
                    if (currentProgress === 1) {
                        disableBtn(prevButton)
                    }
                    if (currentProgress > 1 && currentProgress < 4) {
                        enableBtn(prevButton)
                        enableBtn(nextButton)
                    }
                    if (currentProgress === 4) {
                        disableBtn(nextButton)
                    }
                }, 400)
            }
        </script>
    </body>
</html>